import{r as N,j as t,c as K,a8 as on,k as dn}from"./vendor-B_rOc9P8.js";import{U as dt,V as Ae,C as O,W as un,u as zt,X as gn,Y as qe,Z as Gt,B as Z,_ as $t,$ as Wt,a0 as mn,a1 as qt,a2 as Lt,a3 as fn,a4 as Xt,a5 as gt,a6 as Pe,a7 as ot,a8 as Ut,a9 as Te,aa as hn,ab as xn,o as Yt,ac as bn,ad as Zt,ae as mt,af as Jt,ag as ut,L as pn,ah as yn,ai as Qt,aj as vn,k as jn,ak as Ot,al as wn,am as Vt,b as Nn,an as Sn,ao as Cn,ap as Dt,aq as Mt,ar as Rt,p as be,as as _n,at as Tn,au as An,av as Pn,aw as In,ax as kn,ay as Bn}from"./index-BiZt1Sa0.js";import{c as We,g as En}from"./auth-72H9TcpW.js";import{b as I,d as ft,T as es,a as Ln,k as Un,p as On,s as Ht,D as Dn,t as Mn,S as Rn,v as Hn,w as Kn,C as Fn,x as zn,K as Gn,P as $n,y as Wn}from"./react-dom-B_H8m6fn.js";import{I as te,a as B,s as qn,F as Xn,g as Yn}from"./Icons-CwJmriDx.js";import"./hls-DnSDjNdB.js";import"./language-db-DeOihZrC.js";import"./caption-parsing-BajVcUS6.js";import"./locales-DcUbfxfW.js";var Xe={exports:{}};Xe.exports;(function(s,i){var r=200,u="__lodash_hash_undefined__",c=1,x=2,f=9007199254740991,g="[object Arguments]",m="[object Array]",p="[object AsyncFunction]",S="[object Boolean]",v="[object Date]",F="[object Error]",D="[object Function]",se="[object GeneratorFunction]",z="[object Map]",L="[object Number]",G="[object Null]",E="[object Object]",C="[object Promise]",ne="[object Proxy]",J="[object RegExp]",Q="[object Set]",q="[object String]",fe="[object Symbol]",he="[object Undefined]",d="[object WeakMap]",le="[object ArrayBuffer]",ae="[object DataView]",pe="[object Float32Array]",o="[object Float64Array]",T="[object Int8Array]",_="[object Int16Array]",ye="[object Int32Array]",ve="[object Uint8Array]",M="[object Uint8ClampedArray]",Ze="[object Uint16Array]",Je="[object Uint32Array]",Qe=/[\\^$.*+?()[\]{}|]/g,Ie=/^\[object .+?Constructor\]$/,Ve=/^(?:0|[1-9]\d*)$/,b={};b[pe]=b[o]=b[T]=b[_]=b[ye]=b[ve]=b[M]=b[Ze]=b[Je]=!0,b[g]=b[m]=b[le]=b[S]=b[ae]=b[v]=b[F]=b[D]=b[z]=b[L]=b[E]=b[J]=b[Q]=b[q]=b[d]=!1;var ke=typeof We=="object"&&We&&We.Object===Object&&We,Be=typeof self=="object"&&self&&self.Object===Object&&self,$=ke||Be||Function("return this")(),Ee=i&&!i.nodeType&&i,Le=Ee&&!0&&s&&!s.nodeType&&s,je=Le&&Le.exports===Ee,we=je&&ke.process,Ue=function(){try{return we&&we.binding&&we.binding("util")}catch{}}(),Oe=Ue&&Ue.isTypedArray;function De(e,n){for(var a=-1,l=e==null?0:e.length,y=0,h=[];++a<l;){var w=e[a];n(w,a,e)&&(h[y++]=w)}return h}function et(e,n){for(var a=-1,l=n.length,y=e.length;++a<l;)e[y+a]=n[a];return e}function ht(e,n){for(var a=-1,l=e==null?0:e.length;++a<l;)if(n(e[a],a,e))return!0;return!1}function tt(e,n){for(var a=-1,l=Array(e);++a<e;)l[a]=n(a);return l}function ss(e){return function(n){return e(n)}}function ns(e,n){return e.has(n)}function as(e,n){return e==null?void 0:e[n]}function is(e){var n=-1,a=Array(e.size);return e.forEach(function(l,y){a[++n]=[y,l]}),a}function rs(e,n){return function(a){return e(n(a))}}function cs(e){var n=-1,a=Array(e.size);return e.forEach(function(l){a[++n]=l}),a}var ls=Array.prototype,os=Function.prototype,Me=Object.prototype,st=$["__core-js_shared__"],xt=os.toString,X=Me.hasOwnProperty,bt=function(){var e=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pt=Me.toString,ds=RegExp("^"+xt.call(X).replace(Qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=je?$.Buffer:void 0,Re=$.Symbol,vt=$.Uint8Array,jt=Me.propertyIsEnumerable,us=ls.splice,oe=Re?Re.toStringTag:void 0,wt=Object.getOwnPropertySymbols,gs=yt?yt.isBuffer:void 0,ms=rs(Object.keys,Object),nt=xe($,"DataView"),Ne=xe($,"Map"),at=xe($,"Promise"),it=xe($,"Set"),rt=xe($,"WeakMap"),Se=xe(Object,"create"),fs=ge(nt),hs=ge(Ne),xs=ge(at),bs=ge(it),ps=ge(rt),Nt=Re?Re.prototype:void 0,ct=Nt?Nt.valueOf:void 0;function de(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var l=e[n];this.set(l[0],l[1])}}function ys(){this.__data__=Se?Se(null):{},this.size=0}function vs(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function js(e){var n=this.__data__;if(Se){var a=n[e];return a===u?void 0:a}return X.call(n,e)?n[e]:void 0}function ws(e){var n=this.__data__;return Se?n[e]!==void 0:X.call(n,e)}function Ns(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Se&&n===void 0?u:n,this}de.prototype.clear=ys,de.prototype.delete=vs,de.prototype.get=js,de.prototype.has=ws,de.prototype.set=Ns;function V(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var l=e[n];this.set(l[0],l[1])}}function Ss(){this.__data__=[],this.size=0}function Cs(e){var n=this.__data__,a=Ke(n,e);if(a<0)return!1;var l=n.length-1;return a==l?n.pop():us.call(n,a,1),--this.size,!0}function _s(e){var n=this.__data__,a=Ke(n,e);return a<0?void 0:n[a][1]}function Ts(e){return Ke(this.__data__,e)>-1}function As(e,n){var a=this.__data__,l=Ke(a,e);return l<0?(++this.size,a.push([e,n])):a[l][1]=n,this}V.prototype.clear=Ss,V.prototype.delete=Cs,V.prototype.get=_s,V.prototype.has=Ts,V.prototype.set=As;function ue(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var l=e[n];this.set(l[0],l[1])}}function Ps(){this.size=0,this.__data__={hash:new de,map:new(Ne||V),string:new de}}function Is(e){var n=Fe(this,e).delete(e);return this.size-=n?1:0,n}function ks(e){return Fe(this,e).get(e)}function Bs(e){return Fe(this,e).has(e)}function Es(e,n){var a=Fe(this,e),l=a.size;return a.set(e,n),this.size+=a.size==l?0:1,this}ue.prototype.clear=Ps,ue.prototype.delete=Is,ue.prototype.get=ks,ue.prototype.has=Bs,ue.prototype.set=Es;function He(e){var n=-1,a=e==null?0:e.length;for(this.__data__=new ue;++n<a;)this.add(e[n])}function Ls(e){return this.__data__.set(e,u),this}function Us(e){return this.__data__.has(e)}He.prototype.add=He.prototype.push=Ls,He.prototype.has=Us;function ie(e){var n=this.__data__=new V(e);this.size=n.size}function Os(){this.__data__=new V,this.size=0}function Ds(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}function Ms(e){return this.__data__.get(e)}function Rs(e){return this.__data__.has(e)}function Hs(e,n){var a=this.__data__;if(a instanceof V){var l=a.__data__;if(!Ne||l.length<r-1)return l.push([e,n]),this.size=++a.size,this;a=this.__data__=new ue(l)}return a.set(e,n),this.size=a.size,this}ie.prototype.clear=Os,ie.prototype.delete=Ds,ie.prototype.get=Ms,ie.prototype.has=Rs,ie.prototype.set=Hs;function Ks(e,n){var a=ze(e),l=!a&&sn(e),y=!a&&!l&&lt(e),h=!a&&!l&&!y&&Bt(e),w=a||l||y||h,A=w?tt(e.length,String):[],P=A.length;for(var j in e)X.call(e,j)&&!(w&&(j=="length"||y&&(j=="offset"||j=="parent")||h&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||Js(j,P)))&&A.push(j);return A}function Ke(e,n){for(var a=e.length;a--;)if(At(e[a][0],n))return a;return-1}function Fs(e,n,a){var l=n(e);return ze(e)?l:et(l,a(e))}function Ce(e){return e==null?e===void 0?he:G:oe&&oe in Object(e)?Ys(e):tn(e)}function St(e){return _e(e)&&Ce(e)==g}function Ct(e,n,a,l,y){return e===n?!0:e==null||n==null||!_e(e)&&!_e(n)?e!==e&&n!==n:zs(e,n,a,l,Ct,y)}function zs(e,n,a,l,y,h){var w=ze(e),A=ze(n),P=w?m:re(e),j=A?m:re(n);P=P==g?E:P,j=j==g?E:j;var U=P==E,W=j==E,k=P==j;if(k&&lt(e)){if(!lt(n))return!1;w=!0,U=!1}if(k&&!U)return h||(h=new ie),w||Bt(e)?_t(e,n,a,l,y,h):qs(e,n,P,a,l,y,h);if(!(a&c)){var R=U&&X.call(e,"__wrapped__"),H=W&&X.call(n,"__wrapped__");if(R||H){var ce=R?e.value():e,ee=H?n.value():n;return h||(h=new ie),y(ce,ee,a,l,h)}}return k?(h||(h=new ie),Xs(e,n,a,l,y,h)):!1}function Gs(e){if(!kt(e)||Vs(e))return!1;var n=Pt(e)?ds:Ie;return n.test(ge(e))}function $s(e){return _e(e)&&It(e.length)&&!!b[Ce(e)]}function Ws(e){if(!en(e))return ms(e);var n=[];for(var a in Object(e))X.call(e,a)&&a!="constructor"&&n.push(a);return n}function _t(e,n,a,l,y,h){var w=a&c,A=e.length,P=n.length;if(A!=P&&!(w&&P>A))return!1;var j=h.get(e);if(j&&h.get(n))return j==n;var U=-1,W=!0,k=a&x?new He:void 0;for(h.set(e,n),h.set(n,e);++U<A;){var R=e[U],H=n[U];if(l)var ce=w?l(H,R,U,n,e,h):l(R,H,U,e,n,h);if(ce!==void 0){if(ce)continue;W=!1;break}if(k){if(!ht(n,function(ee,me){if(!ns(k,me)&&(R===ee||y(R,ee,a,l,h)))return k.push(me)})){W=!1;break}}else if(!(R===H||y(R,H,a,l,h))){W=!1;break}}return h.delete(e),h.delete(n),W}function qs(e,n,a,l,y,h,w){switch(a){case ae:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case le:return!(e.byteLength!=n.byteLength||!h(new vt(e),new vt(n)));case S:case v:case L:return At(+e,+n);case F:return e.name==n.name&&e.message==n.message;case J:case q:return e==n+"";case z:var A=is;case Q:var P=l&c;if(A||(A=cs),e.size!=n.size&&!P)return!1;var j=w.get(e);if(j)return j==n;l|=x,w.set(e,n);var U=_t(A(e),A(n),l,y,h,w);return w.delete(e),U;case fe:if(ct)return ct.call(e)==ct.call(n)}return!1}function Xs(e,n,a,l,y,h){var w=a&c,A=Tt(e),P=A.length,j=Tt(n),U=j.length;if(P!=U&&!w)return!1;for(var W=P;W--;){var k=A[W];if(!(w?k in n:X.call(n,k)))return!1}var R=h.get(e);if(R&&h.get(n))return R==n;var H=!0;h.set(e,n),h.set(n,e);for(var ce=w;++W<P;){k=A[W];var ee=e[k],me=n[k];if(l)var Et=w?l(me,ee,k,n,e,h):l(ee,me,k,e,n,h);if(!(Et===void 0?ee===me||y(ee,me,a,l,h):Et)){H=!1;break}ce||(ce=k=="constructor")}if(H&&!ce){var Ge=e.constructor,$e=n.constructor;Ge!=$e&&"constructor"in e&&"constructor"in n&&!(typeof Ge=="function"&&Ge instanceof Ge&&typeof $e=="function"&&$e instanceof $e)&&(H=!1)}return h.delete(e),h.delete(n),H}function Tt(e){return Fs(e,rn,Zs)}function Fe(e,n){var a=e.__data__;return Qs(n)?a[typeof n=="string"?"string":"hash"]:a.map}function xe(e,n){var a=as(e,n);return Gs(a)?a:void 0}function Ys(e){var n=X.call(e,oe),a=e[oe];try{e[oe]=void 0;var l=!0}catch{}var y=pt.call(e);return l&&(n?e[oe]=a:delete e[oe]),y}var Zs=wt?function(e){return e==null?[]:(e=Object(e),De(wt(e),function(n){return jt.call(e,n)}))}:cn,re=Ce;(nt&&re(new nt(new ArrayBuffer(1)))!=ae||Ne&&re(new Ne)!=z||at&&re(at.resolve())!=C||it&&re(new it)!=Q||rt&&re(new rt)!=d)&&(re=function(e){var n=Ce(e),a=n==E?e.constructor:void 0,l=a?ge(a):"";if(l)switch(l){case fs:return ae;case hs:return z;case xs:return C;case bs:return Q;case ps:return d}return n});function Js(e,n){return n=n??f,!!n&&(typeof e=="number"||Ve.test(e))&&e>-1&&e%1==0&&e<n}function Qs(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function Vs(e){return!!bt&&bt in e}function en(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||Me;return e===a}function tn(e){return pt.call(e)}function ge(e){if(e!=null){try{return xt.call(e)}catch{}try{return e+""}catch{}}return""}function At(e,n){return e===n||e!==e&&n!==n}var sn=St(function(){return arguments}())?St:function(e){return _e(e)&&X.call(e,"callee")&&!jt.call(e,"callee")},ze=Array.isArray;function nn(e){return e!=null&&It(e.length)&&!Pt(e)}var lt=gs||ln;function an(e,n){return Ct(e,n)}function Pt(e){if(!kt(e))return!1;var n=Ce(e);return n==D||n==se||n==p||n==ne}function It(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=f}function kt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function _e(e){return e!=null&&typeof e=="object"}var Bt=Oe?ss(Oe):$s;function rn(e){return nn(e)?Ks(e):Ws(e)}function cn(){return[]}function ln(){return!1}s.exports=an})(Xe,Xe.exports);var Zn=Xe.exports;const Jn=En(Zn);function Y(s){const[i,r]=N.useState(void 0);N.useEffect(()=>{r(void 0)},[s]);const u=N.useMemo(()=>!Jn(i,s)&&i!==void 0,[i,s]),c=N.useCallback(g=>{g instanceof Function?r(m=>g(m!==void 0?m:s)):r(g)},[s,r]),x=i===void 0?s:i,f=N.useCallback(()=>r(void 0),[r]);return[x,c,f,u]}function Qn(s,i,r,u,c,x,f,g,m,p){const[S,v,F,D]=Y(c),[se,z,L,G]=Y(x),[E,C,ne,J]=Y(s),Q=dt(tt=>tt.setPreviewTheme),q=N.useCallback(()=>Q(s),[Q,s]),[fe,he,d,le]=Y(i),[ae,pe,o,T]=Y(r),[_,ye,ve,M]=Y(u),[Ze,Je,Qe,Ie]=Y(f),[Ve,b,ke,Be]=Y(g),[$,Ee,Le,je]=Y(m),[we,Ue,Oe,De]=Y(p);function et(){ne(),q(),d(),o(),F(),L(),ve(),Qe(),ke(),Le(),Oe()}return{reset:et,changed:J||le||T||M||G||D||Ie||Be||je||De,theme:{state:E,set:C,changed:J},appLanguage:{state:fe,set:he,changed:le},subtitleStyling:{state:ae,set:pe,changed:T},deviceName:{state:_,set:ye,changed:M},proxyUrls:{state:S,set:v,changed:D},backendUrl:{state:se,set:z,changed:G},profile:{state:Ze,set:Je,changed:Ie},enableThumbnails:{state:Ve,set:b,changed:Be},enableAutoplay:{state:$,set:Ee,changed:je},sourceOrder:{state:we,set:Ue,changed:De}}}function Ye(s){return t.jsx("div",{className:K("w-full rounded-lg bg-settings-card-background bg-opacity-[0.15] border border-settings-card-border",s.paddingClass??"px-8 py-6",s.className),children:s.children})}function ts(s){return t.jsx("div",{className:K("w-full rounded-lg bg-settings-card-altBackground bg-opacity-50",s.paddingClass??"px-8 py-6",s.className),children:s.children})}function Vn(){const{t:s}=I(),i=Ae(),r=O(g=>g.account),{logout:u}=un(),c=zt("account-delete"),[x,f]=ft(async()=>{!r||!i||(await gn(i,r),await u(),c.hide())},[u,r,i,c.hide]);return r?t.jsxs("div",{children:[t.jsx(qe,{border:!0,children:s("settings.account.actions.title")}),t.jsxs(ts,{paddingClass:"px-6 py-12",className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[t.jsxs("div",{children:[t.jsx(Gt,{children:s("settings.account.actions.delete.title")}),t.jsx("p",{className:"text-type-text",children:s("settings.account.actions.delete.text")})]}),t.jsx("div",{className:"flex justify-start lg:justify-end items-center",children:t.jsx(Z,{theme:"danger",loading:x.loading,onClick:c.show,children:s("settings.account.actions.delete.button")})})]}),t.jsx($t,{id:c.id,children:t.jsxs(Wt,{children:[t.jsx(qe,{className:"!mt-0",children:s("settings.account.actions.delete.confirmTitle")}),t.jsx(mn,{children:s("settings.account.actions.delete.confirmDescription")}),t.jsx(Z,{theme:"danger",loading:x.loading,onClick:f,children:s("settings.account.actions.delete.confirmButton")})]})})]}):null}function ea(s){const{t:i}=I();return t.jsx($t,{id:s.id,children:t.jsxs(Wt,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-9",children:[t.jsx(qe,{className:"!mt-0 !mb-0",children:i("settings.account.profile.title")}),t.jsx(qt,{profile:{colorA:s.colorA,colorB:s.colorB,icon:s.userIcon},iconClass:"text-2xl",sizeClass:"w-12 h-12"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(Lt,{label:i("settings.account.profile.firstColor"),value:s.colorA,onInput:s.setColorA}),t.jsx(Lt,{label:i("settings.account.profile.secondColor"),value:s.colorB,onInput:s.setColorB}),t.jsx(fn,{label:i("settings.account.profile.userIcon"),value:s.userIcon,onInput:s.setUserIcon})]}),t.jsx("div",{className:"flex justify-center mt-8",children:t.jsx(Z,{theme:"purple",className:"!px-20",onClick:s.close,children:i("settings.account.profile.finish")})})]})})}function ta(s){const{t:i}=I(),{logout:r}=Xt(),u=zt("profile-edit");return t.jsxs(Ye,{paddingClass:"px-8 py-10",className:"!mt-8",children:[t.jsx(ea,{id:u.id,close:u.hide,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),t.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[t.jsx("div",{children:t.jsx(qt,{profile:{colorA:s.colorA,colorB:s.colorB,icon:s.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:t.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:u.show,children:[t.jsx(te,{icon:B.EDIT}),i("settings.account.accountDetails.editProfile")]})})}),t.jsx("div",{children:t.jsxs("div",{className:"space-y-8 max-w-xs",children:[t.jsx(gt,{label:i("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:i("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:s.deviceName,onChange:c=>s.setDeviceName(c)}),t.jsx("div",{className:"flex space-x-3",children:t.jsx(Z,{theme:"danger",onClick:r,children:i("settings.account.accountDetails.logoutButton")})})]})})]})]})}function Kt(s){const{t:i}=I();return t.jsxs("div",{className:K({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!s.fullscreen,"fixed inset-0 z-[60]":s.fullscreen}),children:[s.fullscreen&&s.show?t.jsx(on,{children:t.jsx("html",{"data-no-scroll":!0})}):null,t.jsx(Yt,{animation:"fade",show:s.show,children:t.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[t.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:s.onToggle,children:t.jsx(te,{icon:s.fullscreen?B.X:B.EXPAND})}),t.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] bottom-0 p-4",children:t.jsx("div",{className:s.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:t.jsx(bn,{text:i("settings.subtitles.previewQuote")??void 0,styling:s.styling,overrideCasing:!1})})})]})})]})}function sa(s){const{t:i}=I(),[r,u]=N.useState(!1);return t.jsxs("div",{children:[t.jsx(Pe,{border:!0,children:i("settings.subtitles.title")}),t.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(ot,{label:i("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:c=>s.setStyling({...s.styling,backgroundOpacity:c/100}),value:s.styling.backgroundOpacity*100,textTransformer:c=>`${c}%`}),t.jsx(ot,{label:i("settings.subtitles.backgroundBlurLabel"),max:100,min:0,onChange:c=>s.setStyling({...s.styling,backgroundBlur:c/100}),value:s.styling.backgroundBlur*1,textTransformer:c=>`${c}%`}),t.jsx(ot,{label:i("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:c=>`${c}%`,onChange:c=>s.setStyling({...s.styling,size:c/100}),value:s.styling.size*100}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ut.FieldTitle,{children:i("settings.subtitles.textBoldLabel")}),t.jsx("div",{className:"flex justify-center items-center",children:t.jsx(Te,{enabled:s.styling.bold,onClick:()=>s.setStyling({...s.styling,bold:!s.styling.bold})})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ut.FieldTitle,{children:i("settings.subtitles.colorLabel")}),t.jsx("div",{className:"flex justify-center items-center",children:hn.map(c=>t.jsx(xn,{onClick:()=>s.setStyling({...s.styling,color:c}),color:c,active:s.styling.color===c},c))})]})]}),t.jsx(Kt,{show:!0,styling:s.styling,onToggle:()=>u(c=>!c)}),t.jsx(Kt,{show:r,fullscreen:!0,styling:s.styling,onToggle:()=>u(c=>!c)})]})]})}function na(s){let{proxyUrls:i,setProxyUrls:r}=s;const{t:u}=I(),c=N.useCallback(()=>{r(g=>[...g??[],""])},[r]),x=N.useCallback((g,m)=>{r(p=>[...(p??[]).map((S,v)=>v!==g?S:m)])},[r]),f=N.useCallback(g=>{r(m=>[...(m??[]).filter((p,S)=>S!==g)])},[r]);return t.jsxs(Ye,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:u("settings.connections.workers.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:t.jsx(es,{i18nKey:"settings.connections.workers.description",children:t.jsx(Zt,{to:"https://docs.undi.rest/proxy/deploy",children:"Proxy documentation"})})})]}),t.jsx("div",{children:t.jsx(Te,{onClick:()=>r(g=>g===null?[]:null),enabled:i!==null})})]}),i!==null?t.jsxs(t.Fragment,{children:[t.jsx(mt,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:u("settings.connections.workers.urlLabel")}),t.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((i==null?void 0:i.length)??0)===0?t.jsx("p",{children:u("settings.connections.workers.emptyState")}):null,(i??[]).map((g,m)=>t.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[t.jsx(gt,{value:g,onChange:p=>x(m,p),placeholder:u("settings.connections.workers.urlPlaceholder")??void 0}),t.jsx("button",{type:"button",onClick:()=>f(m),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:t.jsx(te,{className:"text-xl",icon:B.X})})]},m))]}),t.jsx(Z,{theme:"purple",onClick:c,children:u("settings.connections.workers.addButton")})]}):null]})}function aa(s){let{backendUrl:i,setBackendUrl:r}=s;const{t:u}=I();return t.jsxs(Ye,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:u("settings.connections.server.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:t.jsx(es,{i18nKey:"settings.connections.server.description",children:t.jsx(Zt,{to:"https://docs.undi.rest/backend/deploy",children:"Backend documentation"})})})]}),t.jsx("div",{children:t.jsx(Te,{onClick:()=>r(c=>c===null?"":null),enabled:i!==null})})]}),i!==null?t.jsxs(t.Fragment,{children:[t.jsx(mt,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:u("settings.connections.server.urlLabel")}),t.jsx(gt,{onChange:r,value:i??""})]}):null]})}function ia(s){const{t:i}=I();return t.jsxs("div",{children:[t.jsx(Pe,{border:!0,children:i("settings.connections.title")}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(na,{proxyUrls:s.proxyUrls,setProxyUrls:s.setProxyUrls}),t.jsx(aa,{backendUrl:s.backendUrl,setBackendUrl:s.setBackendUrl})]})]})}function ra(s){return t.jsx("p",{className:"text-type-text",children:s.children})}function ca(s){const{t:i}=I(),r=Ae(),u=O(f=>{var g;return(g=f.account)==null?void 0:g.token}),[c,x]=ft(async()=>{var f;if(!u)throw new Error("No token present");if(!r)throw new Error("No backend set");await yn(r,u,s.id),(f=s.onRemove)==null||f.call(s)},[r,u,s.id]);return t.jsxs(Ye,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[t.jsxs("div",{className:"font-medium",children:[t.jsx(ra,{children:i("settings.account.devices.deviceNameLabel")}),t.jsx("p",{className:"text-white",children:s.name})]}),s.isCurrent?null:t.jsx(Z,{theme:"danger",loading:c.loading,onClick:x,children:i("settings.account.devices.removeDevice")})]})}function la(s){const{t:i}=I(),r=O(f=>{var g;return(g=f.account)==null?void 0:g.seed}),u=s.sessions,c=O(f=>{var g;return(g=f.account)==null?void 0:g.sessionId}),x=N.useMemo(()=>{if(!r)return[];let f=u.map(g=>{const m=Jt(g.device,ut(r));return{current:g.id===c,id:g.id,name:m}});return f=f.sort((g,m)=>g.current?-1:m.current?1:g.name.localeCompare(m.name)),f},[r,u,c]);return r?t.jsxs("div",{children:[t.jsx(qe,{border:!0,className:"mt-0 mb-9",children:i("settings.account.devices.title")}),s.error?t.jsx("p",{children:i("settings.account.devices.failed")}):s.loading?t.jsx(pn,{}):t.jsx("div",{className:"space-y-5",children:x.map(f=>t.jsx(ca,{name:f.name,id:f.id,isCurrent:f.current,onRemove:s.onChange},f.id))})]}):null}function oa(){const s=dn(),{t:i}=I();return t.jsx("div",{children:t.jsxs(ts,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[t.jsxs("div",{children:[t.jsx(Gt,{children:i("settings.account.register.title")}),t.jsx("p",{className:"text-type-text",children:i("settings.account.register.text")})]}),t.jsx("div",{className:"flex justify-end items-center",children:t.jsx(Z,{theme:"purple",onClick:()=>s("/register"),children:i("settings.account.register.cta")})})]})})}function Ft(s){return t.jsxs("section",{className:s.className??"",children:[t.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:s.title}),s.children]})}function da(s){return t.jsxs("button",{type:"button",onClick:s.onClick,className:K("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",s.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[t.jsx(te,{className:K("text-2xl text-settings-sidebar-type-icon",s.active?"text-settings-sidebar-type-iconActivated":null),icon:s.icon}),t.jsx("span",{children:s.children})]})}const ua=16;function ga(s){const{t:i}=I(),r=s.url?s.url.startsWith("https://"):!1;return t.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[t.jsx(te,{icon:r?B.LOCK:B.UNLOCK}),i(r?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function ma(){var S;const{t:s}=I(),{isMobile:i}=Qt(),{account:r}=O(),u=location.hostname,[c,x]=N.useState(""),f=[{textKey:"settings.account.title",id:"settings-account",icon:B.USER},{textKey:"settings.preferences.title",id:"settings-preferences",icon:B.SETTINGS},{textKey:"settings.appearance.title",id:"settings-appearance",icon:B.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:B.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:B.LINK}],g=Ae(),m=Ln(async()=>{if(g)return vn(g)},[g]);N.useEffect(()=>{function v(){var z;const D=(window.innerHeight||document.documentElement.clientHeight)/4,se=f.map(L=>{const G=document.getElementById(L.id);if(!G)return{distance:1/0,link:L.id};const E=G.getBoundingClientRect(),C=Math.abs(D-E.top),ne=Math.abs(D-E.bottom);return{distance:Math.min(ne,C),link:L.id}}).sort((L,G)=>L.distance-G.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?x(f[f.length-1].id):x(((z=se[0])==null?void 0:z.link)??"")}return document.addEventListener("scroll",v),v(),()=>{document.removeEventListener("scroll",v)}});const p=N.useCallback(v=>{const F=document.getElementById(v);if(!F)return null;const D=F.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:D-120,behavior:"smooth"})},[]);return t.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:t.jsxs(Un,{topOffset:-6*ua,stickyClassName:"pt-[6rem]",disabled:i,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[t.jsxs("div",{className:"hidden lg:block",children:[t.jsx(Ft,{title:s("global.pages.settings"),children:f.map(v=>t.jsx(da,{icon:v.icon,active:v.id===c,onClick:()=>p(v.id),children:s(v.textKey)},v.id))}),t.jsx(mt,{})]}),t.jsx(Ft,{className:"text-sm",title:s("settings.sidebar.info.title"),children:t.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.hostname")}),t.jsx("p",{className:"text-white",children:u})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[t.jsx("p",{children:s("settings.sidebar.info.backendUrl")}),t.jsx(ga,{url:g})]}),t.jsx("p",{className:"text-white",children:(g==null?void 0:g.replace(/https?:\/\//,""))??"—"})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.userId")}),t.jsx("p",{className:"text-white",children:(r==null?void 0:r.userId)??s("settings.sidebar.info.notLoggedIn")})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.appVersion")}),t.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:jn().APP_VERSION})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.backendVersion")}),t.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[m.error?t.jsx(te,{icon:B.WARNING,className:"text-type-danger text-base"}):null,m.loading?t.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((S=m==null?void 0:m.value)==null?void 0:S.version)||s("settings.sidebar.info.unknownVersion")]})]})]})})]})})}const fa=[{id:"default",selector:"theme-default",key:"settings.appearance.themes.default"},{id:"teal",selector:"theme-teal",key:"settings.appearance.themes.teal"},{id:"red",selector:"theme-red",key:"settings.appearance.themes.red"},{id:"gray",selector:"theme-gray",key:"settings.appearance.themes.gray"},{id:"blck",selector:"theme-blck",key:"settings.appearance.themes.blck"}],ha=function(i){const{t:r}=I();return t.jsxs("div",{className:K(i.selector,"cursor-pointer group tabbable"),onClick:i.onClick,children:[t.jsxs("div",{tabIndex:0,onKeyUp:u=>u.key==="Enter"&&u.currentTarget.click(),className:K("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",i.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[t.jsxs("div",{className:"absolute top-2 left-2",children:[t.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),t.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),t.jsx(te,{icon:B.CHECKMARK,className:K("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",i.active?"opacity-100":"opacity-0")}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:t.jsxs("div",{className:"relative w-full h-full",children:[t.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),t.jsxs("div",{className:"p-2 flex justify-between items-center",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),t.jsxs("div",{className:"mt-5 px-3",children:[t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),t.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsx("span",{className:"font-medium text-white",children:i.name}),t.jsx("span",{className:K("inline-block px-3 py-1 leading-tight text-sm transition-opacity duration-150 rounded-full bg-pill-activeBackground text-white/85",i.inUse?"opacity-100":"opacity-0 pointer-events-none"),children:r("settings.appearance.activeTheme")})]})]})},xa=ha;function ba(s){const{t:i}=I();return t.jsxs("div",{children:[t.jsx(Pe,{border:!0,children:i("settings.appearance.title")}),t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-6 max-w-[700px]",children:fa.map(r=>t.jsx(xa,{selector:r.selector,active:s.active===r.id,inUse:s.inUse===r.id,name:i(r.key),onClick:()=>s.setTheme(r.id)},r.id))})]})}function pa(s){const{attributes:i,listeners:r,setNodeRef:u,transform:c,transition:x}=Kn({id:s.item.id}),f={transform:Fn.Transform.toString(c),transition:x};return t.jsxs("div",{ref:u,style:f,...i,...r,className:K("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg touch-none",s.item.disabled&&"opacity-50",c?"cursor-grabbing":"cursor-grab"),children:[t.jsx("span",{className:"flex-1 text-white font-bold",children:s.item.name}),s.item.disabled&&t.jsx(te,{icon:B.WARNING}),t.jsx(te,{icon:B.MENU})]})}function ya(s){const i=On(Ht($n),Ht(Gn,{coordinateGetter:zn})),r=u=>{const{active:c,over:x}=u;if(x&&c.id!==x.id){const f=s.items,g=f.findIndex(S=>S.id===c.id),m=f.findIndex(S=>S.id===x.id),p=Wn(f,g,m);s.setItems(p)}};return t.jsx(Dn,{sensors:i,collisionDetection:Mn,onDragEnd:r,children:t.jsx(Rn,{items:s.items,strategy:Hn,children:t.jsx("div",{className:"flex flex-col gap-2",children:s.items.map(u=>t.jsx(pa,{item:u},u.id))})})})}function va(s){const{t:i}=I(),r=qn(Ot.map(m=>m.code)),u=wn(),c=Ot.sort((m,p)=>r.indexOf(m.code)-r.indexOf(p.code)).map(m=>({id:m.code,name:`${m.name}${m.nativeName?` — ${m.nativeName}`:""}`,leftIcon:t.jsx(Xn,{langCode:m.code})})),x=c.find(m=>{var p;return m.id===((p=Yn(s.language))==null?void 0:p.code)}),f=Vt().listSources(),g=N.useMemo(()=>{const m=Nn().listSources();return s.sourceOrder.map(p=>{var S;return{id:p,name:((S=f.find(v=>v.id===p))==null?void 0:S.name)||p,disabled:!m.find(v=>v.id===p)}})},[s.sourceOrder,f]);return t.jsxs("div",{className:"space-y-12",children:[t.jsx(Pe,{border:!0,children:i("settings.preferences.title")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:i("settings.preferences.language")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:i("settings.preferences.languageDescription")}),t.jsx(Sn,{options:c,selectedItem:x||c[0],setSelectedItem:m=>s.setLanguage(m.id)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:i("settings.preferences.ads")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:i("settings.preferences.adsDescription")})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:i("settings.preferences.thumbnail")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:i("settings.preferences.thumbnailDescription")}),t.jsxs("div",{onClick:()=>s.setEnableThumbnails(!s.enableThumbnails),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[t.jsx(Te,{enabled:s.enableThumbnails}),t.jsx("p",{className:"flex-1 text-white font-bold",children:i("settings.preferences.thumbnailLabel")})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:i("settings.preferences.autoplay")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:i("settings.preferences.autoplayDescription")}),t.jsxs("div",{onClick:()=>u?s.setEnableAutoplay(!s.enableAutoplay):null,className:K("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",u?"cursor-pointer opacity-100 pointer-events-auto":"cursor-not-allowed opacity-50 pointer-events-none"),children:[t.jsx(Te,{enabled:s.enableAutoplay&&u}),t.jsx("p",{className:"flex-1 text-white font-bold",children:i("settings.preferences.autoplayLabel")})]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx("p",{className:"text-white font-bold",children:i("settings.preferences.sourceOrder")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:i("settings.preferences.sourceOrderDescription")}),t.jsx(ya,{items:g,setItems:m=>s.setSourceOrder(m.map(p=>p.id))}),t.jsx(Z,{className:"max-w-[25rem]",theme:"secondary",onClick:()=>s.setSourceOrder(f.map(m=>m.id)),children:i("settings.reset")})]})]})}function ja(s){const{isMobile:i}=Qt();return t.jsx(Bn,{ultraWide:!0,classNames:"overflow-visible",children:t.jsxs("div",{className:K("grid gap-12",i?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),children:[t.jsx(ma,{}),t.jsx("div",{children:s.children})]})})}function wa(s){const i=Ae(),{account:r}=s,[u,c]=ft(()=>i?Cn(i,r):Promise.resolve([]),[r,i]);return N.useEffect(()=>{c()},[c]),t.jsxs(t.Fragment,{children:[t.jsx(ta,{deviceName:s.deviceName,setDeviceName:s.setDeviceName,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),t.jsx(la,{error:!!u.error,loading:u.loading,sessions:u.value??[],onChange:c}),t.jsx(Vn,{})]})}function Ba(){const{t:s}=I(),i=Dt(o=>o.theme),r=Dt(o=>o.setTheme),u=dt(o=>o.previewTheme),c=dt(o=>o.setPreviewTheme),x=Mt(o=>o.language),f=Mt(o=>o.setLanguage),g=Rt(o=>o.styling),m=Rt(o=>o.updateStyling),p=O(o=>o.proxySet),S=O(o=>o.setProxySet),v=O(o=>o.backendUrl),F=O(o=>o.setBackendUrl),D=be(o=>o.enableThumbnails),se=be(o=>o.setEnableThumbnails),z=be(o=>o.enableAutoplay),L=be(o=>o.setEnableAutoplay),G=be(o=>o.sourceOrder),E=be(o=>o.setSourceOrder),C=O(o=>o.account),ne=O(o=>o.setAccountProfile),J=O(o=>o.updateDeviceName),Q=N.useMemo(()=>C?Jt(C.deviceName,ut(C.seed)):"",[C]),q=Ae(),{logout:fe}=Xt(),he=O(),d=Qn(i,x,g,Q,p,v,C==null?void 0:C.profile,D,z,G),le=N.useMemo(()=>{const o=Vt().listSources(),T=o.map(M=>M.id),_=d.sourceOrder.state,ye=_.filter(M=>T.includes(M)),ve=o.filter(M=>!_.includes(M.id)).map(M=>M.id);return[...ye,...ve]},[d.sourceOrder.state]);N.useEffect(()=>{c(i??"default")},[c,i]),N.useEffect(()=>()=>{c(null)},[c]);const ae=N.useCallback(o=>{d.theme.set(o==="default"?null:o),c(o)},[d.theme,c]),pe=N.useCallback(async()=>{var o,T;if(C&&q){if((d.appLanguage.changed||d.theme.changed||d.proxyUrls.changed)&&await _n(q,C,{applicationLanguage:d.appLanguage.state,applicationTheme:d.theme.state,proxyUrls:((o=d.proxyUrls.state)==null?void 0:o.filter(_=>_!==""))??null}),d.deviceName.changed){const _=await Tn(d.deviceName.state,ut(C.seed));await An(q,C,{deviceName:_}),J(_)}d.profile.changed&&await Pn(q,C,{profile:d.profile.state})}if(se(d.enableThumbnails.state),L(d.enableAutoplay.state),E(d.sourceOrder.state),f(d.appLanguage.state),r(d.theme.state),m(d.subtitleStyling.state),S(((T=d.proxyUrls.state)==null?void 0:T.filter(_=>_!==""))??null),d.profile.state&&ne(d.profile.state),d.backendUrl.changed){await fe();let _=d.backendUrl.state;_&&!_.startsWith("http://")&&!_.startsWith("https://")&&(_=`https://${_}`),F(_)}},[C,q,se,d,L,E,f,r,m,S,J,ne,fe,F]);return t.jsxs(In,{children:[t.jsx(kn,{subpage:!0,k:"global.pages.settings"}),t.jsxs(ja,{children:[t.jsxs("div",{id:"settings-account",children:[t.jsx(Pe,{border:!0,className:"!mb-0",children:s("settings.account.title")}),he.account&&d.profile.state?t.jsx(wa,{account:he.account,deviceName:d.deviceName.state,setDeviceName:d.deviceName.set,colorA:d.profile.state.colorA,setColorA:o=>{d.profile.set(T=>T?{...T,colorA:o}:void 0)},colorB:d.profile.state.colorB,setColorB:o=>d.profile.set(T=>T?{...T,colorB:o}:void 0),userIcon:d.profile.state.icon,setUserIcon:o=>d.profile.set(T=>T?{...T,icon:o}:void 0)}):t.jsx(oa,{})]}),t.jsx("div",{id:"settings-preferences",className:"mt-48",children:t.jsx(va,{language:d.appLanguage.state,setLanguage:d.appLanguage.set,enableThumbnails:d.enableThumbnails.state,setEnableThumbnails:d.enableThumbnails.set,enableAutoplay:d.enableAutoplay.state,setEnableAutoplay:d.enableAutoplay.set,sourceOrder:le,setSourceOrder:d.sourceOrder.set})}),t.jsx("div",{id:"settings-appearance",className:"mt-48",children:t.jsx(ba,{active:u??"default",inUse:i??"default",setTheme:ae})}),t.jsx("div",{id:"settings-captions",className:"mt-48",children:t.jsx(sa,{styling:d.subtitleStyling.state,setStyling:d.subtitleStyling.set})}),t.jsx("div",{id:"settings-connection",className:"mt-48",children:t.jsx(ia,{backendUrl:d.backendUrl.state,setBackendUrl:d.backendUrl.set,proxyUrls:d.proxyUrls.state,setProxyUrls:d.proxyUrls.set})})]}),t.jsxs(Yt,{animation:"fade",show:d.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3",children:[t.jsx("p",{className:"text-type-danger",children:s("settings.unsaved")}),t.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[t.jsx(Z,{className:"w-full md:w-auto",theme:"secondary",onClick:d.reset,children:s("settings.reset")}),t.jsx(Z,{className:"w-full md:w-auto",theme:"purple",onClick:pe,children:s("settings.save")})]})]})]})}export{wa as AccountSettings,Ba as SettingsPage,Ba as default};
//# sourceMappingURL=Settings-DdevLPDP.js.map
